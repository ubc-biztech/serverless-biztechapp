language: node_js
node_js:
- node
notifications:
  email: false
cache:
  directories:
  - node_modules
jobs:
  include:
    - stage: "Install"
      script: npm install -g serverless
    - stage: "Integration Tests"
      script: sls test
    - stage: "Deploy to Staging"
      script: sls deploy
    - stage: "Deploy to Production"
      script: sls deploy
stages:
  - "Install"
  - "Integration Tests"
  - name: "Deploy to Staging"
    if: branch = dev
  - name: "Deploy to Production"
    if: branch = master