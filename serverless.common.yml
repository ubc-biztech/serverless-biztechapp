provider:
  stage: ${opt:stage, 'dev'}
  apiKeys:
    - ${opt:stage, 'dev'}-api-key
  runtime: nodejs20.x
  region: us-west-2

custom:
  prune:
    automatic: true
    number: 3
  serverless-offline:
    port: 4000

  bundle:
    sourcemaps: false
  
  webpack:
    webpackConfig: 'webpack.config.js' # Name of webpack configuration file
    includeModules: false # Node modules configuration for packaging
    packager: 'npm' # Packager that will be used to package your external modules
    excludeFiles: src/**/*.test.js # Provide a glob for files to ignore


  stage: ${opt:stage, self:provider.stage}
  domains:
    prod: api.ubcbiztech.com
    staging: api-staging.ubcbiztech.com
    dev: api-dev.ubcbiztech.com

  customDomain:
    domainName: ${self:custom.domains.${self:custom.stage}}
    basePath: ''
    stage: ${self:custom.stage}
    certificateName: ${self:custom.customDomain.domainName}
    createRoute53Record: true
    endpointType: 'edge'
    apiType: rest
    autoDomain: false
  	
plugins:
  - serverless-dynamodb-local
  - serverless-offline

